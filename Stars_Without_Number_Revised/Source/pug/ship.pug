input(type="hidden", name="attr_ship_class_normalised", value="").ship-class
input(type="hidden", name="attr_ship_vehicle_type", value="SHIP").input-type

.type.col-2.core-box.flex-between.edit
	h3(data-i18n="VEHICLE_TYPE")
	select(name="attr_ship_vehicle_type")
		option(value="SHIP", data-i18n="SHIP", selected)
		option(value="MECH", data-i18n="MECH")
		option(value="VEHICLE", data-i18n="CUSTOM")

.menus.col-3.core-box.flex-between
	h3(data-i18n="QUICK_MENUS")
	input(type="hidden", name="attr_macro_ship_weapons", value="")
	button(type="roll", name="roll_ship_travel_cost", data-i18n="TRAVEL_COST", value=`&{template:swn-default} {{charname=@{ship_name}}} {{title=^{TRAVEL_COST}}} {{info=You will travel for [[?{Distance?}]] hexes, starting from ?{Starting from?|Edge of system, 0|Other, 2}, and ending in ?{Ending in?|Edge of system, 0|Other, 2}. It will take [[(?{Distance?}*6+?{Starting from?|Edge of system, 0|Other, 2}+?{Ending in?|Edge of system, 0|Other, 2}) / ?{Drive Rating?}]] days and cost [[((?{Distance?}*6+?{Starting from?|Edge of system, 0|Other, 2}+?{Ending in?|Edge of system, 0|Other, 2}) / ?{Drive Rating?}) * @{ship_crew} * 20 ]] credits in life support costs.}}`).btn

//- Ship header
.info.core-box-text.flex
	+text-input("ship_name", "NAME").col40.grow.important
	.text-input.col25.grow.focusinfo
		input(type="text", name="attr_ship_hulltype",)
		.label(data-i18n="HULL_TYPE")
		//.details(data-i18n="HULL_TYPE_BLURB")
	+text-input("ship_class", "CLASS").colsixth.vehicle-type.vehicle-type-ship.vehicle-type-mech
	+text-input("ship_size", "SIZE").colsixth.vehicle-type.vehicle-type-custom
	+text-input("ship_cargo_tonnage", "CARGO").colsixth.vehicle-type.vehicle-type-ship
	+text-input("ship_ground_speed", "GROUND_SPEED").col25.vehicle-type.vehicle-type-custom
	+text-input("ship_home_port", "HOME_PORT").col20.vehicle-type.vehicle-type-ship
	.text-input.price.center.col20.grow
		input(type="text", name="attr_ship_price")
		label.label
			input(type="checkbox", name="attr_ship_calculate_price", value="1")
			span(data-i18n="PRICE") Price
	//+text-input("ship_price", "PRICE").col20.grow Price
	+text-input("ship_operating_cost", "OPERATING_COST").col20.grow
	+text-input("ship_maintenance_cost", "MAINTENANCE COST").col20.grow
	+text-input("ship_last_maintenance", "LAST_MAINTENANCE").col20.grow
.data.core-box-text
	+text-input-duo(
		"ship_fuel",
		"ship_fuel_max",
		"FUEL",
		{type: "number", min: 0, value: 0})(type="number" min="0" value="0")
		.vehicle-type.vehicle-type-ship.vehicle-type-custom Fuel
	+text-input("ship_speed", "SPEED")(type="number", min="0")
	+text-input("ship_ac", "AC")(type="number", min="0")
	+text-input("ship_armor", "ARMOR")(type="number", min="0")
	+text-input("ship_command_points", "CP_GAIN")(type="number", min="0", value="0") CP Gain
	+text-input-duo(
		"ship_life_support",
		"ship_life_support_max",
		"LIFE_SUPPORT",
		{type: "number", min: 0, value: 0})(type="number" min="0" value="0")
		.vehicle-type.vehicle-type-ship.vehicle-type-custom Life Support
	+text-input-trio(
		"ship_crew_min",
		"ship_crew",
		"ship_crew_max",
		"CREW_MIN/CURRENT/MAX",
		{type: "number", min: 0},
		{type: "number", min: 0})(type="number", min="0")
		.vehicle-type.vehicle-type-ship.vehicle-type-custom Crew Min/Current/Max
	//+text-input("ship_crew_min", "CREW_MIN")(type="number", min="0").vehicle-type.vehicle-type-ship.vehicle-type-custom
	//+text-input("ship_crew", "CURRENT")(type="number", min="0", value="0").vehicle-type.vehicle-type-ship.vehicle-type-custom
	//+text-input("ship_crew_max", "MAX")(type="number", min="0").vehicle-type.vehicle-type-ship.vehicle-type-custom
.stats.core-box-text
	+text-input-duo("ship_hp", "ship_hp_max", "HIT_POINTS", {min: "0"})(min="0").important
	input(type="hidden", name="attr_ship_power" value="0").input-color-negative
	+text-input-duo("ship_power", "ship_power_max", "FREE_POWER", {min: "0", value: "0"})(value="0", readonly) Free Power
	input(type="hidden", name="attr_ship_mass" value="0").input-color-negative
	+text-input-duo("ship_mass", "ship_mass_max", "FREE_MASS", {min: "0", value: "0"})(value="0", readonly) Free Mass
	input(type="hidden", name="attr_ship_hardpoints" value="0").input-color-negative
	+text-input-duo("ship_hardpoints", "ship_hardpoints_max", "FREE_HARDPOINTS", {min: "0", value: "0"})(value="0", readonly) Free Hardpoints

//- Weapons
.section
	+sectionheader("show_ship_weapons", "WEAPONS")
	.ship-weapons
		fieldset.repeating_ship-weapons
			input(type="hidden", name="attr_weapon_api", value="")
			input(type="hidden", name="attr_weapon_price")
			button(type="roll", name="roll_Attack", value!="&{template:swn-attack} {{charname=@{ship_name}}} {{title=@{weapon_name} â€“ @{weapon_qualities}}} {{attack=[[1d20 + @{weapon_attack_bonus}[Attack Bonus] @{modifier_query}]]}} {{damage=[[@{weapon_damage}]]}} @{weapon_use_ammo} @{weapon_api}").display.invisible-button
			.display.grey-box-bordered
				input(type="hidden", name="attr_weapon_broken", value="0").hider
				span.broken.space-after #[span(data-i18n="BROKEN")]:
				span.name.ellipsis.space-after
					span(name="attr_weapon_name").space-after
					input(type="hidden", name="attr_weapon_attack_bonus").add-plus
					span(name="attr_weapon_attack_bonus")
				span
					| (
					span(name="attr_weapon_damage").space-after
					span.space-after #[span(data-i18n="DAMAGE").lower];
					span(name="attr_weapon_qualities")
					input(type="hidden", name="attr_weapon_range", value="").hide-empty
					span.vehicle-type.vehicle-type-mech
						| ; #[span(data-i18n="RANGE")] #[span(name="attr_weapon_range")]
					| ; #[span(data-i18n="POWER")]&nbsp;
					span(name="attr_weapon_power")
					| , #[span(data-i18n="MASS")]&nbsp;
					span(name="attr_weapon_mass")
					| , #[span(data-i18n="HARDPOINTS")]&nbsp;
					span(name="attr_weapon_hardpoints")
					| )
				input(type="hidden", name="attr_weapon_use_ammo", value="0").hider
				span.vehicle-type.vehicle-type-ship.vehicle-type-custom
					| . #[span(data-i18n="AMMO")]:&nbsp;
					input(type="number", name="attr_weapon_ammo").inline-input
					| &nbsp;/&nbsp;
					span(name="attr_weapon_ammo_max")
			.edit.flex-wrap.grey-box-bordered
				+text-input("weapon_name", "NAME").name.ellipsis
				+text-input("weapon_power", "POWER")(type="number", value="0", min="0").center.number
				+text-input("weapon_mass", "MASS")(type="number", value="0", min="0").center.number
				+text-input("weapon_hardpoints", "HARDPOINTS_SHORT")(type="number", value="0", min="0").center.number
				+fake-text-input("BROKEN").center.broken
					input(type="checkbox", name="attr_weapon_broken", value="1")
				+text-input("weapon_attack_bonus", "ATTACK_BONUS_SHORT")(type="number", value="0").center.number
				+text-input("weapon_damage", "DAMAGE")(value="0").center.damage
				+text-input("weapon_qualities", "QUALITIES").qualities.grow
				+text-input("weapon_range", "RANGE").range.vehicle-type.vehicle-type-mech
				+text-input-duo("weapon_ammo", "weapon_ammo_max", "", {min: "0"})(min="0").vehicle-type.vehicle-type-ship.vehicle-type-custom
					label.label
						input(type="checkbox", name="attr_weapon_use_ammo", value="{{ammo=[[@{weapon_ammo} - 1]] / @{weapon_ammo_max}}}")
						span(data-i18n="AMMO")

//- Fittings
.section.cols-2.rows-2
	+sectionheader("show_ship_fittings", "FITTING")
	.ship-fitting
		fieldset.repeating_ship-fittings
			input(type="hidden", name="attr_fitting_price")
			.display
				input(type="hidden", name="attr_fitting_broken", value="0").hider
				span.broken.space-after #[span(data-i18n="BROKEN")]:
				span(name="attr_fitting_name").name.ellipsis.space-after
				span.space-after
					| (#[span(data-i18n="POWER")]&nbsp;
					span(name="attr_fitting_power")
					| , #[span(data-i18n="MASS")]&nbsp;
					span(name="attr_fitting_mass")
					| ).
				span(name="attr_fitting_effect").description
			.edit.flex.grey-box-bordered
				+text-input("fitting_name", "NAME").name.ellipsis
				+text-input("fitting_power", "POWER")(type="number", value="0").center.number
				+text-input("fitting_mass", "MASS")(type="number", value="0").center.number
				+fake-text-input("EFFECT").effect
					textarea(name="attr_fitting_effect")
				+fake-text-input("BROKEN").center.broken
					input(type="checkbox", name="attr_fitting_broken", value="1")

//- Defenses
.section
	+sectionheader("show_ship_defenses", "DEFENSES")
	.ship-defenses
		fieldset.repeating_ship-defenses
			input(type="hidden", name="attr_defense_price")
			.display
				input(type="hidden", name="attr_defense_broken", value="0").hider
				span.broken.space-after #[span(data-i18n="BROKEN")]:
				span(name="attr_defense_name").name.ellipsis.space-after
				span.space-after
					| (#[span(data-i18n="POWER")]&nbsp;
					span(name="attr_defense_power")
					| , #[span(data-i18n="MASS")]&nbsp;
					span(name="attr_defense_mass")
					| ).
				span(name="attr_defense_effect").description
			.edit.flex.grey-box-bordered
				+text-input("defense_name", "NAME").name.ellipsis
				+text-input("defense_power", "POWER")(type="number", value="0").center.number
				+text-input("defense_mass", "MASS")(type="number", value="0").center.number
				+fake-text-input("EFFECT").effect
					textarea(name="attr_defense_effect")
				+fake-text-input("BROKEN").center.broken
					input(type="checkbox", name="attr_defense_broken", value="1")

//- Notes
.section.cols-3
	+sectionheader("show_ship_other)", "NOTES")
	.halfgrid
		textarea(name="attr_ship_notes")
		textarea(name="attr_ship_other_notes")
